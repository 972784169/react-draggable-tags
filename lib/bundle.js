module.exports=function(t){var e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("react")},function(t,e){t.exports=require("immutable")},function(t,e,n){"use strict";n.r(e);var s=n(0),o=n.n(s),i=(n(8),n(1)),r=(n(7),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t});const a=void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile");function l({isInAnotherArea:t=(()=>{}),passAddFunc:e=(()=>{})}={}){return class extends o.a.Component{constructor(){super(),this.state={tags:Object(i.List)([])},this.draggableTagEles={},this.tagEles={},this.positions=[],this.rect={},this.dragStart={},this.tagChanged=!1}componentDidMount(){this.props.initialTags?this.setTags(Object(i.List)(this.props.initialTags)):this.setTags(Object(i.List)(this.props.tags)),e(this.container,this.addTag.bind(this)),this.props.getAddTagFunc&&this.props.getAddTagFunc(this.addTag.bind(this))}componentWillReceiveProps({tags:t}){t&&(t.length!==this.props.tags.length||t.some((t,e)=>t.id!==this.state.tags.get(e).id))&&this.setTags(Object(i.List)(t))}componentDidUpdate(t,{tags:e}){this.tagChanged=this.tagChanged||this.state.tags.some((t,n)=>!e.get(n)||t.id!==e.get(n).id)}dragElement(e,n,s){const o=this.props.isList;let i,r=0,l=0,c={};this.positions.forEach((t,e)=>{t.id===n&&(i=e)});const f=t=>{if(this.tagChanged=!1,!window.dragMouseDown){for(window.dragMouseDown=!0,c=this.container.getBoundingClientRect(),t=t||window.event,r=t.clientX||t.touches[0].clientX,l=t.clientY||t.touches[0].clientY,e.style.zIndex=2,window.parentDragTag=e.parentElement;window.parentDragTag&&!window.parentDragTag.classList.contains("DraggableTags-tag-drag");)window.parentDragTag=window.parentDragTag.parentElement;window.parentDragTag&&(window.parentDragTag.style.zIndex=2),document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",p,!1),e.addEventListener("touchend",u,!1),e.addEventListener("touchcancel",u,!1),e.addEventListener("touchmove",p,!1),this.positions.forEach((t,e)=>{t.id===n&&(i=e)})}},p=t=>{a&&(this.container.style.overflowY="visible"),"touchmove"===t.type&&t.preventDefault();let n=(t=t||window.event).clientX||t.touches[0].clientX,c=t.clientY||t.touches[0].clientY,f=n-r,p=c-l;r=n,l=c;let u=e.offsetTop+p,d=e.offsetLeft+f;e.style.top=u+"px",e.style.left=d+"px";let h,g=s.offsetTop+e.offsetHeight/2,v=s.offsetLeft+e.offsetWidth/2,m=g+u,b=v+d;for(h=0;h<this.positions.length-1;h++)if((i!==h||i===this.positions.length-2&&h===this.positions.length-2)&&(i-1!==h||0===h)){const t=this.positions[h],n=this.positions[h+1];let s=!1,r=!1,a=!1,l=!1,c=!1;if(o?(m<t.bottom+6&&m>n.top-6&&(a=!0),0===h&&m<t.top+4&&(s=!0),h===this.positions.length-2&&m>n.bottom-4&&(r=!0)):(0===h&&m>t.top&&m<t.bottom&&b<t.left+8&&(s=!0),h===this.positions.length-2&&(m>n.top&&b>n.left-8||m>n.bottom)&&(r=!0),m>t.top&&m<t.bottom&&b>t.right-8&&b<n.left+8&&(a=!0),m>n.top&&m<n.bottom&&b<n.left+8&&t.top<n.top&&(c=!0),m>t.top&&m<t.bottom&&b>t.right-8&&t.top<n.top&&(l=!0)),!o&&(s||r||a||c||l)||o&&(s||r||a)){let t=this.state.tags.get(i),n=this.state.tags.splice(i,1);(i<h||s)&&!r?(n=n.splice(h,0,t),i=h):(n=n.splice(h+1,0,t),i=h+1),this.positions=[];const o=this.tagEles[t.id].offsetTop,a=this.tagEles[t.id].offsetLeft;this.setState({tags:n},()=>{let t,s;n.forEach((e,n)=>{const o=this.tagEles[e.id];n===i&&(s=o.offsetLeft,t=o.offsetTop),this.positions.push({id:e.id,top:o.offsetTop,left:o.offsetLeft,bottom:o.offsetTop+o.offsetHeight,right:o.offsetLeft+o.offsetWidth})}),e.style.left=s>a?`${d-(s-a)}px`:`${d+(a-s)}px`,e.style.top=o>t?`${u+(o-t)}px`:`${u-(t-o)}px`});break}}},u=n=>{a&&(this.container.style.overflowY="auto"),window.dragMouseDown=!1,document.removeEventListener("mouseup",u,!1),document.removeEventListener("mousemove",p,!1),e.removeEventListener("touchend",u,!1),e.removeEventListener("touchcancel",u,!1),e.removeEventListener("touchmove",p,!1),window.parentDragTag&&(window.parentDragTag.style.zIndex=1);let s=e.getBoundingClientRect(),o=s.left+s.width/2,r=s.top+s.height/2;if((o<c.left||o>c.right||r<c.top||r>c.bottom)&&t(e.getBoundingClientRect(),this.state.tags.get(i)))return this.positions.splice(i,1),void this.setState({tags:this.state.tags.splice(i,1)},()=>{this.props.onChange&&this.props.onChange(this.state.tags.toJS())});e.style.top=0,e.style.left=0,e.style.zIndex=1,this.tagChanged&&this.props.onChange&&(this.tagChanged=!1,this.props.onChange(this.state.tags.toJS()))};e.addEventListener("mousedown",f,!1),e.addEventListener("touchstart",f,!1)}setTags(t,e){this.setState({tags:t},()=>{e&&e(),this.positions=[],this.state.tags.forEach((t,e)=>{const n=this.draggableTagEles[t.id],s=this.tagEles[t.id];this.positions.push({id:t.id,top:s.offsetTop,left:s.offsetLeft,bottom:s.offsetTop+s.offsetHeight,right:s.offsetLeft+s.offsetWidth}),this.dragElement(n,t.id,s)})})}addTag(t){this.setTags(this.state.tags.push(t),()=>{this.props.onChange&&this.props.onChange(this.state.tags.toJS())})}buildDeleteTagFunc(t){return()=>{const e=this.state.tags.filter(e=>t.id!==e.id);this.setTags(e,()=>{this.props.onChange&&this.props.onChange(this.state.tags.toJS())})}}render(){let{render:t,build:e,style:n,className:s,isList:i,tagMargin:l="5px",tagStyle:c}=this.props;t||(t=e);const f=this.state.tags.toJS().map(e=>o.a.createElement("div",{key:e.id,className:"DraggableTags-tag",ref:t=>{this.tagEles[e.id]=t},style:i?r({display:"block"},c):c},o.a.createElement("div",{className:"DraggableTags-tag-drag",ref:t=>this.draggableTagEles[e.id]=t},t({tag:e,deleteThis:this.buildDeleteTagFunc(e)})),o.a.createElement("div",{style:{opacity:0,overflow:"hidden"}},t({tag:e,deleteThis:this.buildDeleteTagFunc(e)}))));return o.a.createElement("div",{ref:t=>this.container=t,className:`DraggableTags ${s||""}`,style:a?r({overflowY:"auto"},n):n},a?o.a.createElement("div",{style:{height:"101%"}},f):f)}}}class c{constructor(){this.isInAreas=[]}addArea(){return l({isInAnotherArea:(t,e)=>{let n=t.left+t.width/2,s=t.top+t.height/2;return this.isInAreas.some(t=>t(e,n,s))},passAddFunc:(t,e)=>{this.isInAreas.push(function(n,s,o){const i=t.getBoundingClientRect();if(s>i.left&&s<i.right&&o>i.top&&o<i.bottom)return e(n),!0})}})}}n.d(e,"DraggableArea",function(){return f}),n.d(e,"DraggableAreasGroup",function(){return c});const f=l()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,s=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:s+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var s,o,i={},r=(s=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=s.apply(this,arguments)),o}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),l=null,c=0,f=[],p=n(3);function u(t,e){for(var n=0;n<t.length;n++){var s=t[n],o=i[s.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](s.parts[r]);for(;r<s.parts.length;r++)o.parts.push(b(s.parts[r],e))}else{var a=[];for(r=0;r<s.parts.length;r++)a.push(b(s.parts[r],e));i[s.id]={id:s.id,refs:1,parts:a}}}}function d(t,e){for(var n=[],s={},o=0;o<t.length;o++){var i=t[o],r=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};s[r]?s[r].parts.push(a):n.push(s[r]={id:r,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var s=f[f.length-1];if("top"===t.insertAt)s?s.nextSibling?n.insertBefore(e,s.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),f.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),m(e,t.attrs),h(t,e),e}function m(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function b(t,e){var n,s,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var r=c++;n=l||(l=v(e)),s=T.bind(null,n,r,!1),o=T.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),h(t,e),e}(e),s=function(t,e,n){var s=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(s=p(s));o&&(s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([s],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),s=function(t,e){var n=e.css,s=e.media;s&&t.setAttribute("media",s);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){g(n)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return u(n,e),function(t){for(var s=[],o=0;o<n.length;o++){var r=n[o];(a=i[r.id]).refs--,s.push(a)}t&&u(d(t,e),e);for(o=0;o<s.length;o++){var a;if(0===(a=s[o]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var y,w=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function T(t,e,n,s){var o=n?"":s.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(i,r[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",s=t[3];if(!s)return n;if(e&&"function"==typeof btoa){var o=(r=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),i=s.sources.map(function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var r;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var s={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(s[i]=!0)}for(o=0;o<t.length;o++){var r=t[o];"number"==typeof r[0]&&s[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".DraggableTags {\n  position: relative;\n  height: 100%;\n}\n.DraggableTags::after {\n  content: '';\n  display: block;\n  clear: both;\n}\n.DraggableTags-tag {\n  display: inline-block;\n  position: relative;\n  color: transparent;\n  cursor: move;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.DraggableTags-tag-drag {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 1;\n}\n",""])},function(t,e,n){var s=n(6);"string"==typeof s&&(s=[[t.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(s,o);s.locals&&(t.exports=s.locals)},function(t,e){t.exports=require("react-dom")}]);